window.__require=function e(t,n,a){function o(i,s){if(!n[i]){if(!t[i]){var c=i.split("/");if(c=c[c.length-1],!t[c]){var l="function"==typeof __require&&__require;if(!s&&l)return l(c,!0);if(r)return r(c,!0);throw new Error("Cannot find module '"+i+"'")}i=c}var G=n[i]={exports:{}};t[i][0].call(G.exports,function(e){return o(t[i][1][e]||e)},G,G.exports,e,t,n,a)}return n[i].exports}for(var r="function"==typeof __require&&__require,i=0;i<a.length;i++)o(a[i]);return o}({ResultPanel:[function(e,t,n){"use strict";cc._RF.push(t,"863e7G0fAFGRan3Xl+Ufyw5","ResultPanel");var a,o=e("../../ymtScripts/yomitoo/tools/PlatformAdManager").PlatformAdManager,r=e,i=n,s=(a=function(e,t){return(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}a(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),c=function(e,t,n,a){var o,r=arguments.length,i=r<3?t:null===a?a=Object.getOwnPropertyDescriptor(t,n):a;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,n,a);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(i=(r<3?o(i):r>3?o(t,n,i):o(t,n))||i);return r>3&&i&&Object.defineProperty(t,n,i),i};Object.defineProperty(i,"__esModule",{value:!0}),i.ResultPanel=void 0;var l=r("UIMgr"),G=r("GameConfig"),d=r("GameDataCenter"),m=r("Gconfig"),u=r("GGAnalysis"),p=r("GGDevice"),v=r("GGRandom"),f=r("GGGameManager"),C=r("GGI18nManager"),h=r("UIManager"),g=r("UIManagerMachine"),y=r("Power"),D=cc._decorator,_=D.ccclass,w=D.property,S=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.mask=null,t.panel=null,t.tickNode=null,t.screenshot=null,t.btnLabel=null,t.videoType="",t}return s(t,e),t.prototype.onEnabled=function(){u.GGAnalysis.sendUserEvent("\u8fdb\u5165\u7ed3\u7b97\u9875"),h.UIManager.curPanelName="\u7ed3\u7b97\u9875",4==G.GameConfig.serverConfig.SWITCH_SUCCESS_INT&&(d.GameDataCenter.intersInterval<G.GameConfig.serverConfig.SWITCH_SUCCESS_INT_INTERVAL?d.GameDataCenter.intersInterval++:(d.GameDataCenter.intersInterval=0,d.GameDataCenter.intersVideoAd.show())),u.GGAnalysis.sendStageEndEvent(d.GameDataCenter.levelIndex,!0),l.UIMgr.setShowAnimation(this.panel,this.mask),-1==d.GameDataCenter.passedLevel.indexOf(d.GameDataCenter.levelIndex)&&(d.GameDataCenter.passedLevel.push(d.GameDataCenter.levelIndex),d.GameDataCenter.passedLevel=d.GameDataCenter.passedLevel),d.GameDataCenter.gameLevel++,d.GameDataCenter.gameLevel>d.GameDataCenter.totalLevel?d.GameDataCenter.levelIndex=v.GGRandom.randomNumber(1,d.GameDataCenter.totalLevel):d.GameDataCenter.levelIndex=d.GameDataCenter.gameLevel,-1==d.GameDataCenter.unlockLevel.indexOf(d.GameDataCenter.levelIndex)&&(d.GameDataCenter.unlockLevel.push(d.GameDataCenter.levelIndex),d.GameDataCenter.unlockLevel=d.GameDataCenter.unlockLevel),d.GameDataCenter.gameCount++,0==window.eReviewSwitch&&0==G.GameConfig.serverConfig.reviewSwitch&&3!=G.GameConfig.serverConfig.SWITCH_RESULT_SHOW_TICK&&d.GameDataCenter.gameCount%G.GameConfig.serverConfig.SWITCH_RESULT_SHOW_TICK_INTERVAL==0?this.tickNode.active=!0:this.tickNode.active=!1,cc.director.getPhysicsManager().enabled=!1},t.prototype.onDisabled=function(){cc.director.getPhysicsManager().enabled=!0},t.prototype.onAddEvents=function(){},t.prototype.onRemoveEvents=function(){},t.prototype.onLoaded=function(){d.GameDataCenter.screenshot&&(this.screenshot.spriteFrame=d.GameDataCenter.screenshot,d.GameDataCenter.screenshot=null);var e=cc.view.getVisibleSize();e.height/e.width>2?(this.screenshot.node.scaleX=.25,this.screenshot.node.scaleY=-.25):(this.screenshot.node.scaleX=.3,this.screenshot.node.scaleY=-.3)},t.prototype.onStart=function(){d.GameDataCenter.bannerAd.show(),this.scheduleOnce(function(){d.GameDataCenter.bannerAd.show()},1)},t.prototype.onDestroyed=function(){},t.prototype.onClickNextBtn=function(){var e=this;if(u.GGAnalysis.sendUITouchEvent("\u7ed3\u7b97\u9875_\u4e0b\u4e00\u5173"),cc.systemEvent.emit(m.GameEvents.S_Play_Sound,m.GameSounds.S_Btn_Click),this.tickNode.active)o.inst.showRewardedVideo(function(t){t&&(d.GameDataCenter.key++,p.GGDevice.showToast(C.GGI18nManager.getString("\u606d\u559c\u83b7\u5f97\u94a5\u5319x1")),d.GameDataCenter.infinitePower?e.continueGame():y.Power.isStartGame()?e.continueGame():(p.GGDevice.showToast(C.GGI18nManager.getString("\u4f53\u529b\u4e0d\u8db3\uff01\u65e0\u6cd5\u8fdb\u884c\u6e38\u620f")),e.backHome()))});else{if(!d.GameDataCenter.infinitePower){if(!y.Power.isStartGame())return void this.backHome();y.Power.onPowerSub()}this.continueGame()}},t.prototype.onClickGetKey=function(){cc.systemEvent.emit(m.GameEvents.S_Play_Sound,m.GameSounds.S_Btn_Click),o.inst.showRewardedVideo(function(){G&&(d.GameDataCenter.key++,p.GGDevice.showToast(C.GGI18nManager.getString("\u606d\u559c\u83b7\u5f97\u94a5\u5319x1")))})},t.prototype.onClickSelectBtn=function(){u.GGAnalysis.sendUITouchEvent("\u7ed3\u7b97\u9875_\u590d\u9009\u6846"),cc.systemEvent.emit(m.GameEvents.S_Play_Sound,m.GameSounds.S_Btn_Click),this.tickNode.active=!this.tickNode.active},t.prototype.onPullVideo=function(){d.GameDataCenter.rewardVideoAd.closeCallbacks=[],d.GameDataCenter.rewardVideoAd.closeCallbacks=[f.GGGameManager.getClickEvents(this.node,this.name,"videoCallback")],d.GameDataCenter.rewardVideoAd.errorCallbacks=[],d.GameDataCenter.rewardVideoAd.errorCallbacks=[f.GGGameManager.getClickEvents(this.node,this.name,"onVideoErr")],d.GameDataCenter.rewardVideoAd.showRewardVideoAd()},t.prototype.backHome=function(){h.UIManager.close("result/ResultPanel",!0),g.UIManagerMachine.instance.onTransition("btnBack")},t.prototype.backChooseLevel=function(){h.UIManager.close("result/ResultPanel",!0),g.UIManagerMachine.instance.onTransition("btnLevel")},t.prototype.continueGame=function(){h.UIManager.close("result/ResultPanel",!0),g.UIManagerMachine.instance.onTransition("refreshGame")},t.prototype.onVideoErr=function(){},t.prototype.videoCallback=function(e){if(e)return p.GGDevice.showToast(C.GGI18nManager.getString(e.msg));switch(this.videoType){case"normal":d.GameDataCenter.key++,p.GGDevice.showToast(C.GGI18nManager.getString("\u606d\u559c\u83b7\u5f97\u94a5\u5319x1"));break;case"force":d.GameDataCenter.key++,p.GGDevice.showToast(C.GGI18nManager.getString("\u606d\u559c\u83b7\u5f97\u94a5\u5319x1")),d.GameDataCenter.infinitePower?this.continueGame():y.Power.isStartGame()?this.continueGame():(p.GGDevice.showToast(C.GGI18nManager.getString("\u4f53\u529b\u4e0d\u8db3\uff01\u65e0\u6cd5\u8fdb\u884c\u6e38\u620f")),this.backHome())}},c([w({type:cc.Node,tooltip:"\u906e\u7f69"})],t.prototype,"mask",void 0),c([w({type:cc.Node,tooltip:"\u9762\u677f"})],t.prototype,"panel",void 0),c([w({type:cc.Node,tooltip:"\u6253\u94a9"})],t.prototype,"tickNode",void 0),c([w({type:cc.Sprite,tooltip:"\u622a\u56fe\u8282\u70b9"})],t.prototype,"screenshot",void 0),c([w({type:cc.Label,tooltip:"\u4e0b\u4e00\u5173\u6309\u94ae\u6587\u5b57"})],t.prototype,"btnLabel",void 0),c([_],t)}(MonoUIPanel);i.ResultPanel=S,cc._RF.pop()},{"../../ymtScripts/yomitoo/tools/PlatformAdManager":void 0}]},{},["ResultPanel"]);