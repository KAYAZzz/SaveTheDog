window.__require=function e(t,n,o){function a(i,c){if(!n[i]){if(!t[i]){var s=i.split("/");if(s=s[s.length-1],!t[s]){var l="function"==typeof __require&&__require;if(!c&&l)return l(s,!0);if(r)return r(s,!0);throw new Error("Cannot find module '"+i+"'")}i=s}var u=n[i]={exports:{}};t[i][0].call(u.exports,function(e){return a(t[i][1][e]||e)},u,u.exports,e,t,n,o)}return n[i].exports}for(var r="function"==typeof __require&&__require,i=0;i<o.length;i++)a(o[i]);return a}({DayPower:[function(e,t,n){"use strict";cc._RF.push(t,"200120DD49FA5wcb8Er2WVN","DayPower");var o,a=e("../../ymtScripts/yomitoo/tools/PlatformAdManager").PlatformAdManager,r=e,i=n,c=(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),s=function(e,t,n,o){var a,r=arguments.length,i=r<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,n,o);else for(var c=e.length-1;c>=0;c--)(a=e[c])&&(i=(r<3?a(i):r>3?a(t,n,i):a(t,n))||i);return r>3&&i&&Object.defineProperty(t,n,i),i};Object.defineProperty(i,"__esModule",{value:!0}),i.DayPower=void 0;var l=r("UIMgr"),u=r("GameConfig"),p=r("GameDataCenter"),f=r("Gconfig"),m=r("GGAnalysis"),y=r("GGDevice"),d=r("GGStore"),G=(r("GGGameManager"),r("GGI18nManager")),g=r("UIManager"),h=cc._decorator,v=h.ccclass,w=h.property,D=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.mask=null,t.panel=null,t.ProgressBar=null,t.nextGrade=null,t}return c(t,e),t.prototype.onEnabled=function(){m.GGAnalysis.sendUserEvent("\u8fdb\u5165\u4f53\u529b\u7279\u6743\u9875"),g.UIManager.curPanelName="\u4f53\u529b\u7279\u6743\u9875",this.initProgress(p.GameDataCenter.infiniteCount),l.UIMgr.setShowAnimation(this.panel,this.mask)},t.prototype.onDisabled=function(){},t.prototype.onAddEvents=function(){this.registerEvent("UPDATE_DATA_INFINITE_COUNT",this.updateProgress,this)},t.prototype.onRemoveEvents=function(){},t.prototype.onStart=function(){},t.prototype.onDestroyed=function(){},t.prototype.onClickBackBtn=function(){g.UIManager.close("home/DayPower",!0),m.GGAnalysis.sendUITouchEvent("\u4f53\u529b\u7279\u6743\u9875_\u653e\u5f03"),g.UIManager.curPanelName="\u9996\u9875"},t.prototype.onClickReceiveBtn=function(){a.inst.showRewardedVideo(function(e){e&&p.GameDataCenter.infiniteCount++})},t.prototype.initProgress=function(e){switch(this.ProgressBar.progress=.34*e,e>=3&&(this.ProgressBar.progress=1),e){case 1:this.nextGrade.string="V2";break;case 2:this.nextGrade.string="V3";break;default:this.nextGrade.string="V1"}},t.prototype.updateProgress=function(e){switch(this.ProgressBar.progress=.34*e,e>=3&&(this.ProgressBar.progress=1),e){case 1:this.nextGrade.string="V2",p.GameDataCenter.power=u.GameConfig.serverConfig.STRENGTH_MAX,y.GGDevice.showToast(G.GGI18nManager.getString("\u606d\u559c\u83b7\u5f97\u4f53\u529b")),m.GGAnalysis.sendUserEvent("\u4f53\u529b\u7279\u6743_V1");break;case 2:this.nextGrade.string="V3",p.GameDataCenter.power=u.GameConfig.serverConfig.STRENGTH_MAX,y.GGDevice.showToast(G.GGI18nManager.getString("\u606d\u559c\u83b7\u5f97\u4f53\u529b")),m.GGAnalysis.sendUserEvent("\u4f53\u529b\u7279\u6743_V2");break;case 3:if(!p.GameDataCenter.infinitePower){var t=window.GGDateTime.getTimeStamp()+86400;d.GGStore.set("fl_infiniteTime",t),p.GameDataCenter.infinitePower=!0,cc.systemEvent.emit(f.GameEvents.S_Update_Data_Power),y.GGDevice.showToast(G.GGI18nManager.getString("\u606d\u559c\u83b7\u5f97\u65e0\u9650\u4f53\u529b\u7279\u6743!")),g.UIManager.close("home/DayPower",!0),m.GGAnalysis.sendUserEvent("\u4f53\u529b\u7279\u6743_V3"),g.UIManager.curPanelName="\u9996\u9875"}break;default:this.nextGrade.string="V1"}},t.prototype.onVideoCb=function(e){e?(y.GGDevice.showToast(G.GGI18nManager.getString("\u89c2\u770b\u5b8c\u6574\u89c6\u9891\u624d\u80fd\u83b7\u5f97\u5956\u52b1!")),console.log(e)):p.GameDataCenter.infiniteCount++},t.prototype.onShare=function(){},s([w({type:cc.Node,tooltip:"\u906e\u7f69"})],t.prototype,"mask",void 0),s([w({type:cc.Node,tooltip:"\u9762\u677f"})],t.prototype,"panel",void 0),s([w({type:cc.ProgressBar,tooltip:"\u65e0\u9650\u4f53\u529b\u8fdb\u5ea6\u6761"})],t.prototype,"ProgressBar",void 0),s([w({type:cc.Label,tooltip:"\u4e0b\u4e00\u7b49\u7ea7\u6587\u672c\u6846"})],t.prototype,"nextGrade",void 0),s([v],t)}(MonoUIPanel);i.DayPower=D,cc._RF.pop()},{"../../ymtScripts/yomitoo/tools/PlatformAdManager":void 0}],HomePanel:[function(e,t,n){"use strict";cc._RF.push(t,"dfc275IB4BFlLFkkeppIEMR","HomePanel");var o,a=e("../../ymtScripts/tools/game_sys/GameSys").default,r=e("../../ymtScripts/yomitoo/tools/PlatformAdManager").PlatformAdManager,i=e,c=n,s=(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),l=function(e,t,n,o){var a,r=arguments.length,i=r<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,n,o);else for(var c=e.length-1;c>=0;c--)(a=e[c])&&(i=(r<3?a(i):r>3?a(t,n,i):a(t,n))||i);return r>3&&i&&Object.defineProperty(t,n,i),i};Object.defineProperty(c,"__esModule",{value:!0}),c.HomePanel=void 0;var u=i("AudioMgr"),p=i("GameDataCenter"),f=i("Gconfig"),m=i("GGAnalysis"),y=i("GGDevice"),d=i("GGRandom"),G=i("GameShare"),g=i("GGI18nManager"),h=i("UIManager"),v=i("UIManagerMachine"),w=i("Power"),D=cc._decorator,C=D.ccclass,_=(D.property,function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.isUnlock=!1,t.loadBunldIndex=0,t}return s(t,e),t.prototype.onEnabled=function(){m.GGAnalysis.sendUserEvent("\u8fdb\u5165\u9996\u9875"),h.UIManager.curPanelName="\u9996\u9875",p.GameDataCenter.levelIndex=p.GameDataCenter.gameLevel,p.GameDataCenter.gameLevel>p.GameDataCenter.totalLevel?p.GameDataCenter.levelIndex=d.GGRandom.randomNumber(1,p.GameDataCenter.totalLevel):p.GameDataCenter.levelIndex=p.GameDataCenter.gameLevel,this.isUnlock=!1,this.loadBundle()},t.prototype.loadBundle=function(){var e=this;cc.assetManager.loadBundle("spine",function(t,n){if(t)return console.log("spine bundle \u5931\u8d25:",t);n.load("prefab/actionNode",cc.Prefab,function(t,n){cc.instantiate(n).parent=e.node,e.animationAction()}),p.GameDataCenter.levelPrefabs["level"+p.GameDataCenter.levelIndex]?e.isUnlock=!0:cc.assetManager.loadBundle("level",function(t,n){if(t)return console.log("\u52a0\u8f7dlevel bundle \u5931\u8d25:",t);n.load("prefab/levels/level"+p.GameDataCenter.levelIndex,cc.Prefab,function(t,n){n&&(p.GameDataCenter.levelPrefabs[n.name]=n,e.isUnlock=!0,e.loadBunldIndex++,e.loadBundleComplete())})})}),cc.assetManager.loadBundle("game",function(t,n){if(t)return console.log("\u52a0\u8f7dgame bundle \u5931\u8d25:",t);e.node.parent.addComponent(u.AudioMgr),n.loadDir("res/snd",cc.AudioClip,function(t,n){for(var o=0;o<n.length;o++){var a=n[o];p.GameDataCenter.audios[a.name]=a}p.GameDataCenter.isPlayMusic||(cc.systemEvent.emit(f.GameEvents.S_Play_Sound,"bgMugic",!0,!0),p.GameDataCenter.isPlayMusic=!0),e.loadBunldIndex++,e.loadBundleComplete()})}),cc.assetManager.loadBundle("chooseLevel",function(t){if(t)return console.log("\u52a0\u8f7dchooseLevel bundle \u5931\u8d25:",t);e.loadBunldIndex++,e.loadBundleComplete()}),cc.assetManager.loadBundle("result",function(t){if(t)return console.log("\u52a0\u8f7dresult bundle \u5931\u8d25:",t);e.loadBunldIndex++,e.loadBundleComplete()})},t.prototype.loadBundleComplete=function(){this.loadBunldIndex>=4&&setTimeout(function(){a.loadGameComplete()})},t.prototype.onStart=function(){r.inst.showBanner()},t.prototype.onClickStartBtn=function(){if(cc.systemEvent.emit(f.GameEvents.S_Play_Sound,f.GameSounds.S_Btn_Click),this.isUnlock){if(m.GGAnalysis.sendUITouchEvent("\u9996\u9875_\u5f00\u59cb\u6e38\u620f"),!p.GameDataCenter.infinitePower){if(!w.Power.isStartGame())return void h.UIManager.open("home/PowerPanel");w.Power.onPowerSub()}cc.assetManager.getBundle("game")?v.UIManagerMachine.instance.onTransition("btnGameStart"):cc.assetManager.loadBundle("game",function(e){if(e)return console.log("\u52a0\u8f7dgame bundle\u5931\u8d25",e);v.UIManagerMachine.instance.onTransition("btnGameStart")})}},t.prototype.onClickDayPowerBtn=function(){m.GGAnalysis.sendUITouchEvent("\u9996\u9875_\u4f53\u529b\u7279\u6743"),cc.systemEvent.emit(f.GameEvents.S_Play_Sound,f.GameSounds.S_Btn_Click),p.GameDataCenter.infinitePower?y.GGDevice.showToast(g.GGI18nManager.getString("\u60a8\u5df2\u83b7\u5f9724h\u65e0\u9650\u4f53\u529b\u7279\u6743!")):h.UIManager.open("home/DayPower")},t.prototype.onClickShareBtn=function(){cc.systemEvent.emit(f.GameEvents.S_Play_Sound,f.GameSounds.S_Btn_Click),G.GameShare.shareAppMessage()},t.prototype.getDataFromServer=function(){},t.prototype.animationAction=function(){var e=this,t=this.node.getChildByName("actionNode");if(t){var n=t.getChildByName("wanDog"),o=n.getChildByName("skeleton").getComponent(sp.Skeleton),a=t.getChildByName("womanDog"),r=a.getChildByName("skeleton").getComponent(sp.Skeleton),i=t.getChildByName("honeyBee1"),c=t.getChildByName("honeyBee2"),s=t.getChildByName("honeyBee3");cc.tween(n).call(function(){n.angle=0,n.scaleX=1,n.x=700,o.animation="walk3"}).to(2,{x:100}).call(function(){o.animation="idle4"}).delay(1).call(function(){o.animation="shock"}).delay(.5).call(function(){o.animation="walk2"}).to(2,{x:-500}).call(function(){n.scaleX=-1}).delay(.5).to(2,{x:100}).delay(.2).call(function(){o.animation="injured"}).delay(1.2).call(function(){o.animation="sting"}).to(1,{x:700,angle:-350}).start(),cc.tween(a).call(function(){a.scaleX=-1,a.x=500,r.animation="walk"}).to(2,{x:-100}).call(function(){a.scaleX=1,r.animation="Takelove"}).delay(1).call(function(){a.scaleX=-1,r.animation="walk2"}).delay(.5).to(2,{x:-700}).call(function(){a.scaleX=1}).delay(.5).to(2,{x:-100}).call(function(){r.animation="idle"}).delay(2.2).call(function(){r.animation="walk2"}).to(1,{x:500}).start(),cc.tween(i).call(function(){i.scaleX=1,i.x=600,i.y=220}).delay(1.5).to(1.2,{x:320}).delay(1).to(2.5,{x:-480}).call(function(){i.scaleX=-1}).delay(1).to(1,{x:30}).call(function(){i.angle=-30}).to(.25,{x:30,y:60}).to(.25,{x:60,y:20}).to(.25,{x:30,y:60}).to(.25,{x:60,y:20}).to(.25,{x:30,y:60}).call(function(){i.angle=0,i.x=30,i.y=220}).delay(.8).to(1.4,{x:580}).start(),cc.tween(c).call(function(){c.scaleX=1,c.x=600,c.y=150}).delay(1.5).to(1.2,{x:320}).delay(1).to(2.5,{x:-480}).call(function(){c.scaleX=-1}).delay(1).to(1,{x:30}).call(function(){c.angle=-30}).to(.25,{x:70,y:60}).to(.25,{x:100,y:20}).to(.25,{x:70,y:60}).to(.25,{x:100,y:20}).to(.25,{x:70,y:60}).call(function(){c.angle=0,c.y=150,c.x=30}).delay(.8).to(1.4,{x:580}).start(),cc.tween(s).call(function(){s.scaleX=1,s.x=530,s.y=185}).delay(1.5).to(1.2,{x:250}).delay(1).to(2.5,{x:-550}).call(function(){s.scaleX=-1,s.x=-410}).delay(1).to(1,{x:100}).call(function(){s.angle=-30}).to(.25,{x:100,y:100}).to(.25,{x:130,y:60}).to(.25,{x:100,y:100}).to(.25,{x:130,y:60}).to(.25,{x:100,y:100}).call(function(){s.angle=0,s.y=185,s.x=100}).delay(.8).to(1.4,{x:650}).call(function(){e.animationAction()}).start()}},l([C],t)}(MonoUIPanel));c.HomePanel=_,cc._RF.pop()},{"../../ymtScripts/tools/game_sys/GameSys":void 0,"../../ymtScripts/yomitoo/tools/PlatformAdManager":void 0}],Key:[function(e,t,n){"use strict";cc._RF.push(t,"24cffmrfp9FaJyWyz63LJy+","Key");var o,a=e("../../ymtScripts/yomitoo/tools/PlatformAdManager").PlatformAdManager,r=e,i=n,c=(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),s=function(e,t,n,o){var a,r=arguments.length,i=r<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,n,o);else for(var c=e.length-1;c>=0;c--)(a=e[c])&&(i=(r<3?a(i):r>3?a(t,n,i):a(t,n))||i);return r>3&&i&&Object.defineProperty(t,n,i),i};Object.defineProperty(i,"__esModule",{value:!0}),i.Key=void 0;var l=r("GameDataCenter"),u=r("Gconfig"),p=(r("GGAnalysis"),r("GGDevice")),f=(r("GGGameManager"),r("GGI18nManager")),m=(r("UIManager"),cc._decorator),y=m.ccclass,d=m.property,G=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.num=null,t}return c(t,e),t.prototype.onEnabled=function(){this.updateKeyLable()},t.prototype.onDisabled=function(){},t.prototype.onAddEvents=function(){this.registerEvent(u.GameEvents.S_Update_Data_Key,this.updateKeyLable,this)},t.prototype.onRemoveEvents=function(){},t.prototype.onStart=function(){},t.prototype.onDestroyed=function(){},t.prototype.onClickAddKey=function(){l.GameDataCenter.isStopCountDown=!0,a.inst.showRewardedVideo(function(e){l.GameDataCenter.isStopCountDown=!1,e&&(l.GameDataCenter.key+=1,p.GGDevice.showToast(f.GGI18nManager.getString("\u606d\u559c\u83b7\u5f97\u94a5\u5319x1")))})},t.prototype.updateKeyLable=function(){this.num.string=""+l.GameDataCenter.key},t.prototype.onVideoErr=function(){l.GameDataCenter.isStopCountDown=!1},t.prototype.onVideCb=function(e){if(l.GameDataCenter.isStopCountDown=!1,e)return p.GGDevice.showToast(f.GGI18nManager.getString(e.msg));l.GameDataCenter.key+=1,p.GGDevice.showToast(f.GGI18nManager.getString("\u606d\u559c\u83b7\u5f97\u94a5\u5319x1"))},s([d({type:cc.Label,tooltip:"\u6570\u91cf"})],t.prototype,"num",void 0),s([y],t)}(MonoBehavior);i.Key=G,cc._RF.pop()},{"../../ymtScripts/yomitoo/tools/PlatformAdManager":void 0}],PowerPanel:[function(e,t,n){"use strict";cc._RF.push(t,"f7018E5jK9EYZnQWxON2rPB","PowerPanel");var o,a=e("../../ymtScripts/yomitoo/tools/PlatformAdManager").PlatformAdManager,r=e,i=n,c=(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),s=function(e,t,n,o){var a,r=arguments.length,i=r<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,n,o);else for(var c=e.length-1;c>=0;c--)(a=e[c])&&(i=(r<3?a(i):r>3?a(t,n,i):a(t,n))||i);return r>3&&i&&Object.defineProperty(t,n,i),i};Object.defineProperty(i,"__esModule",{value:!0}),i.PowerPanel=void 0;var l=r("UIMgr"),u=r("GameConfig"),p=r("GameDataCenter"),f=r("Gconfig"),m=r("GGAnalysis"),y=r("GGDevice"),d=(r("GGGameManager"),r("GGI18nManager")),G=r("UIManager"),g=cc._decorator,h=g.ccclass,v=g.property,w=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.mask=null,t.panel=null,t.lastPanelName="",t}return c(t,e),t.prototype.onEnabled=function(){m.GGAnalysis.sendUserEvent("\u8fdb\u5165\u4f53\u529b\u4e0d\u8db3\u9875"),this.lastPanelName=G.UIManager.curPanelName,G.UIManager.curPanelName="\u4f53\u529b\u4e0d\u8db3\u9875",l.UIMgr.setShowAnimation(this.panel,this.mask)},t.prototype.onDisabled=function(){G.UIManager.curPanelName=this.lastPanelName},t.prototype.onAddEvents=function(){},t.prototype.onRemoveEvents=function(){},t.prototype.onStart=function(){},t.prototype.onDestroyed=function(){},t.prototype.onClickBackBtn=function(){m.GGAnalysis.sendUITouchEvent("\u4f53\u529b\u4e0d\u8db3\u9875_\u653e\u5f03"),cc.systemEvent.emit(f.GameEvents.S_Play_Sound,f.GameSounds.S_Btn_Click),G.UIManager.close("home/PowerPanel",!0)},t.prototype.onClickReceiveBtn=function(){var e=this;cc.systemEvent.emit(f.GameEvents.S_Play_Sound,f.GameSounds.S_Btn_Click),a.inst.showRewardedVideo(function(t){t&&e.rewardCallback()})},t.prototype.onVideoErr=function(){},t.prototype.videoCallback=function(e){if(e)return y.GGDevice.showToast(d.GGI18nManager.getString(e.msg));this.rewardCallback()},t.prototype.rewardCallback=function(){p.GameDataCenter.power=u.GameConfig.serverConfig.STRENGTH_MAX,y.GGDevice.showToast(d.GGI18nManager.getString("\u606d\u559c\u83b7\u5f97\u4f53\u529b")),G.UIManager.close("home/PowerPanel",!0)},s([v({type:cc.Node,tooltip:"\u906e\u7f69"})],t.prototype,"mask",void 0),s([v({type:cc.Node,tooltip:"\u9762\u677f"})],t.prototype,"panel",void 0),s([h],t)}(MonoUIPanel);i.PowerPanel=w,cc._RF.pop()},{"../../ymtScripts/yomitoo/tools/PlatformAdManager":void 0}],Power:[function(e,t,n){"use strict";cc._RF.push(t,"8aaceWdCpxBfZVNdyKXkaNs","Power");var o,a=e("../../ymtScripts/yomitoo/tools/PlatformAdManager").PlatformAdManager,r=e,i=n,c=(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),s=function(e,t,n,o){var a,r=arguments.length,i=r<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,n,o);else for(var c=e.length-1;c>=0;c--)(a=e[c])&&(i=(r<3?a(i):r>3?a(t,n,i):a(t,n))||i);return r>3&&i&&Object.defineProperty(t,n,i),i};Object.defineProperty(i,"__esModule",{value:!0}),i.Power=void 0;var l=r("GameConfig"),u=r("GameDataCenter"),p=r("Gconfig"),f=(r("GGAnalysis"),r("GGDateTime")),m=r("GGDateTimeFormat"),y=r("GGDevice"),d=r("GGNumberFormat"),G=r("GGStore"),g=(r("GGGameManager"),r("GGI18nManager")),h=(r("UIManager"),cc._decorator),v=h.ccclass,w=h.property,D=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.powerLabel=null,t.countDownLabel=null,t.time=0,t.countDownFunc=null,t.dayPowerTime=0,t}var n;return c(t,e),n=t,t.prototype.onEnabled=function(){this.getTime(),this.onBeginCountDown(),this.onPowerChange()},t.prototype.onDisabled=function(){},t.prototype.onAddEvents=function(){cc.systemEvent.on(p.GameEvents.S_Update_Data_Power,this.onPowerChange,this),this.registerEvent(p.GameEvents.S_Update_Day_Power_Time,this.onBeginDayPowerCountDown,this)},t.prototype.onRemoveEvents=function(){cc.systemEvent.off(p.GameEvents.S_Update_Data_Power,this.onPowerChange,this)},t.prototype.onStart=function(){this.node.parent.zIndex=cc.macro.MAX_ZINDEX-1e3},t.prototype.onDestroyed=function(){},t.prototype.onClickAddPower=function(){u.GameDataCenter.isStopCountDown=!0,a.inst.showRewardedVideo(function(e){u.GameDataCenter.isStopCountDown=!1,e&&(console.warn("AAA",l.GameConfig.serverConfig),u.GameDataCenter.power=l.GameConfig.serverConfig.STRENGTH_MAX,y.GGDevice.showToast(g.GGI18nManager.getString("\u606d\u559c\u83b7\u5f97\u4f53\u529b")))})},t.isStartGame=function(){return u.GameDataCenter.power>=l.GameConfig.serverConfig.STRENGTH_GAME_SUB},t.onPowerSub=function(){u.GameDataCenter.power-=l.GameConfig.serverConfig.STRENGTH_GAME_SUB},t.onRestorePower=function(){u.GameDataCenter.power=l.GameConfig.serverConfig.STRENGTH_MAX,G.GGStore.remove(n.timeKey)},t.prototype.onPowerChange=function(){u.GameDataCenter.infinitePower?(this.powerLabel.string="\u221e",this.powerLabel.fontSize=70,0==window.eReviewSwitch&&0==l.GameConfig.serverConfig.reviewSwitch&&3!=l.GameConfig.serverConfig.SWITCH_SHOW_ADD_POWER_BUTTON?this.node.getChildByName("btn_add_power").active=!0:this.node.getChildByName("btn_add_power").active=!1,this.countDownLabel.node.active=!0,this.onBeginDayPowerCountDown()):(this.powerLabel.string=""+u.GameDataCenter.power,this.powerLabel.fontSize=36,this.node.getChildByName("btn_add_power").active=!0,this.countDownLabel&&this.updateCuntDownLabel(),this.onBeginCountDown())},t.prototype.getTime=function(){var e=f.GGDateTime.getTimeStamp()-G.GGStore.get(n.timeKey,f.GGDateTime.getTimeStamp());e<1&&(e=1),u.GameDataCenter.power+e/l.GameConfig.serverConfig.ADD_STRENGTH_INTERVAL>l.GameConfig.serverConfig.STRENGTH_MAX?(u.GameDataCenter.power=l.GameConfig.serverConfig.STRENGTH_MAX,G.GGStore.remove(n.timeKey)):u.GameDataCenter.power=Math.floor(u.GameDataCenter.power+e/l.GameConfig.serverConfig.ADD_STRENGTH_INTERVAL),this.time=e%l.GameConfig.serverConfig.ADD_STRENGTH_INTERVAL},t.prototype.updateCuntDownLabel=function(){if(u.GameDataCenter.power<l.GameConfig.serverConfig.STRENGTH_MAX){this.countDownLabel.node.active=!0;var e=l.GameConfig.serverConfig.ADD_STRENGTH_INTERVAL-this.time,t=e%60,n=e>=60?Math.floor(e/60)%60:0;this.countDownLabel.string=d.GGNumberFormat.formatLen(n,2)+":"+d.GGNumberFormat.formatLen(t,2)}else this.countDownLabel.string="00:00",this.countDownLabel.node.active=!1},t.prototype.onBeginCountDown=function(){u.GameDataCenter.power<l.GameConfig.serverConfig.STRENGTH_MAX&&!this.countDownFunc?(this.countDownFunc=this.onCountDownEvent.bind(this),this.schedule(this.countDownFunc,1),this.onCountDownEvent()):u.GameDataCenter.power>=l.GameConfig.serverConfig.STRENGTH_MAX&&this.countDownFunc&&(this.unschedule(this.countDownFunc),this.countDownFunc=null,G.GGStore.remove(n.timeKey))},t.prototype.onCountDownEvent=function(){this.node.active==this.node.parent.active?(this.time++,this.time===l.GameConfig.serverConfig.ADD_STRENGTH_INTERVAL&&(this.time=0,u.GameDataCenter.power++,u.GameDataCenter.power===l.GameConfig.serverConfig.STRENGTH_MAX&&(this.unschedule(this.countDownFunc),this.countDownFunc=null,G.GGStore.remove(n.timeKey))),G.GGStore.set(n.timeKey,f.GGDateTime.getTimeStamp()-this.time),this.countDownLabel&&this.updateCuntDownLabel()):(this.unschedule(this.countDownFunc),this.countDownFunc=null)},t.prototype.onVideoErr=function(){u.GameDataCenter.isStopCountDown=!1},t.prototype.videoCallback=function(){},t.prototype.onBeginDayPowerCountDown=function(){this.countDownFunc&&(this.unschedule(this.countDownFunc),this.countDownFunc=null,G.GGStore.remove(n.timeKey));var e=G.GGStore.get("fl_infiniteTime",window.GGDateTime.getTimeStamp()),t=window.GGDateTime.getTimeStamp();t>=e?(u.GameDataCenter.infinitePower=!1,this.unschedule(this.onDayPowerCountDownEvent)):(this.dayPowerTime=e-t,this.countDownLabel&&this.schedule(this.onDayPowerCountDownEvent,1))},t.prototype.onDayPowerCountDownEvent=function(){this.dayPowerTime--,this.dayPowerTime<=0&&(u.GameDataCenter.infinitePower=!1,this.unschedule(this.onDayPowerCountDownEvent)),this.countDownLabel.string=m.GGDateTimeFormat.formatTimeString(this.dayPowerTime)},t.EEventName={ON_CHANGE_POWER:"ON_CHANGE_POWER"},t.timeKey="PJTimeKey",s([w({type:cc.Label,tooltip:"\u4f53\u529b\u503c."})],t.prototype,"powerLabel",void 0),s([w({type:cc.Label,tooltip:"\u5012\u8ba1\u65f6."})],t.prototype,"countDownLabel",void 0),n=s([v],t)}(MonoBehavior);i.Power=D,cc._RF.pop()},{"../../ymtScripts/yomitoo/tools/PlatformAdManager":void 0}]},{},["DayPower","HomePanel","Key","Power","PowerPanel"]);