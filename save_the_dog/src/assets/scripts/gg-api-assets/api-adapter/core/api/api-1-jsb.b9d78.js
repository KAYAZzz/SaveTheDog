if(console.log("[TS-API] ===>>>","Load API jsb.",cc.sys.isNative),window.gg=window.gg||{},cc.sys.isNative&&!window.qg){gg.jsb=gg.jsb||{},gg.isLayaAir()?cc.sys.os===cc.sys.OS_IOS?gg.callStaticMethod=(e,g,...a)=>PlatformClass.createClass(e).call(g,...a):gg.callStaticMethod=(e,g,a,...t)=>PlatformClass.createClass(e).call(g,...t):gg.callStaticMethod=(e,g,...a)=>jsb.reflection.callStaticMethod(e,g,...a);const e=gg.log,g=gg.info,a=gg.debug,t=gg.warn,c=gg.error,i=e=>{let g=(new Date).toLocaleTimeString()+"";for(let a=0;a<e.length;a++)e[a]=gg.stringifyJSON(e[a]),g+=" "+e[a];return g},l=(e,g)=>{const a=gg.stringifyJSON({t:e,c:g});gg.isIOS&&gg.callStaticMethod("DebugTool","pushLog:",a)};gg.log=(...g)=>{const a=i(g);e(...g),l("L",a)},gg.info=(...e)=>{const a=i(e);g(...e),l("I",a)},gg.debug=(...e)=>{const g=i(e);a(...e),l("D",g)},gg.warn=(...e)=>{const g=i(e);t(...e),l("W",g)},gg.error=(...e)=>{const g=i(e);c(...e),l("E",g)},gg.setEnableDebug=e=>{try{gg.setDisplayLogPanel(e.enableDebug),cc.debug.setDisplayStats(e.enableDebug),e&&e.success&&e.success()}catch(g){e&&e.fail&&e.fail(g)}e&&e.complete&&e.complete()},gg.getDeviceId=()=>gg.isIOS?gg.callStaticMethod("DeviceManager","getDeviceId"):gg.callStaticMethod("com/ily/core/jsb/DeviceManager","getDeviceId","()Ljava/lang/String;"),gg.getOiad=()=>gg.isIOS?gg.callStaticMethod("DeviceManager","getOaid"):gg.callStaticMethod("com/ily/core/jsb/DeviceManager","getOaid","()Ljava/lang/String;"),gg.getLocalIPAddress=e=>{try{const a=gg.isIOS?gg.callStaticMethod("DeviceManager","getLocalIPAddress"):gg.callStaticMethod("com/ily/core/jsb/DeviceManager","getLocalIPAddress","()Ljava/lang/String;");a?e.success&&e.success({localip:a}):e.fail&&e.fail({errMsg:"\u83b7\u53d6\u7f51\u7edc\u5931\u8d25\uff0c\u8bf7\u68c0\u67e5\u7f51\u7edc\u3002"})}catch(g){e.fail&&e.fail({errMsg:g})}e.complete&&e.complete()},gg.getNetworkType=e=>new Promise((g,a)=>{try{const t=gg.isIOS?gg.callStaticMethod("DeviceManager","getNetworkType"):"android network type";e.success&&e.success({networkType:t}),g({networkType:t})}catch(g){e.fail&&e.fail(g),a(g)}e.complete&&e.complete()}),gg.getAppName=()=>gg.isIOS?gg.callStaticMethod("BaseToolManager","getAppName"):gg.callStaticMethod("com/ily/core/jsb/BaseToolManager","getAppName","()Ljava/lang/String;"),gg.getAppVersion=()=>gg.isIOS?gg.callStaticMethod("BaseToolManager","getVersion"):gg.callStaticMethod("com/ily/core/jsb/BaseToolManager","getVersion","()Ljava/lang/String;"),gg.getPackageName=()=>gg.isIOS?gg.callStaticMethod("BaseToolManager","getPackageName"):gg.callStaticMethod("com/ily/core/jsb/BaseToolManager","getPackageName","()Ljava/lang/String;"),gg.jsb.getChannel=()=>gg.isIOS?gg.callStaticMethod("BaseToolManager","getChannel"):gg.callStaticMethod("com/ily/core/jsb/BaseToolManager","getChannel","()Ljava/lang/String;"),gg.getSystemInfoSync=()=>new Promise((e,g)=>{if(gg.__systemInfo)return e(gg.__systemInfo);try{gg.__systemInfo=JSON.parse(gg.isIOS?gg.callStaticMethod("DeviceManager","getSystemInfoSync"):gg.callStaticMethod("com/ily/core/jsb/DeviceManager","getSystemInfoSync","()Ljava/lang/String;")),gg.isLayaAir()||(gg.__systemInfo.screenWidth=cc.view.getFrameSize().width,gg.__systemInfo.screenHeight=cc.view.getFrameSize().height,gg.__systemInfo.windowWidth=cc.view.getVisibleSize().width,gg.__systemInfo.windowHeight=cc.view.getVisibleSize().height),e(gg.__systemInfo)}catch(e){g(e)}}),gg.getSystemInfoASync=e=>{gg.jsb.getSystemInfoSync().then(g=>{e.success&&e.success(g),e.complete&&e.complete()}).catch(g=>{e.fail&&e.fail(g),e.complete&&e.complete()})},gg.getSystemInfo=e=>(gg.warn("\u7531\u4e8e\u5386\u53f2\u539f\u56e0\uff0cgg.getSystemInfo \u662f\u5f02\u6b65\u7684\u8c03\u7528\u683c\u5f0f\uff0c\u4f46\u662f\u662f\u540c\u6b65\u8fd4\u56de\uff0c\u9700\u8981\u5f02\u6b65\u83b7\u53d6\u7cfb\u7edf\u4fe1\u606f\u8bf7\u4f7f\u7528 gg.getSystemInfoASync"),gg.warn("\u7531\u4e8e\u5386\u53f2\u539f\u56e0\uff0cgg.getSystemInfo \u662f\u5f02\u6b65\u7684\u8c03\u7528\u683c\u5f0f\uff0c\u4f46\u662f\u662f\u540c\u6b65\u8fd4\u56de\uff0c\u9700\u8981\u5f02\u6b65\u83b7\u53d6\u7cfb\u7edf\u4fe1\u606f\u8bf7\u4f7f\u7528 gg.getSystemInfoASync"),gg.warn("\u7531\u4e8e\u5386\u53f2\u539f\u56e0\uff0cgg.getSystemInfo \u662f\u5f02\u6b65\u7684\u8c03\u7528\u683c\u5f0f\uff0c\u4f46\u662f\u662f\u540c\u6b65\u8fd4\u56de\uff0c\u9700\u8981\u5f02\u6b65\u83b7\u53d6\u7cfb\u7edf\u4fe1\u606f\u8bf7\u4f7f\u7528 gg.getSystemInfoASync"),gg.getSystemInfoASync(e)),gg.getLaunchOptionsSync=()=>({scene:1001,query:{},shareTicket:void 0,referrerInfo:void 0,chatType:0}),gg.getEnterOptionsSync=gg.getLaunchOptionsSync,gg.getBatteryInfoSync=()=>new Promise((e,g)=>{try{e(JSON.parse(gg.isIOS?gg.callStaticMethod("DeviceManager","getBatteryInfoSync"):gg.callStaticMethod("com/ily/core/jsb/DeviceManager","getBatteryInfoSync","()Ljava/lang/String;")))}catch(e){g(e)}}),gg.getBatteryInfo=e=>gg.getBatteryInfoSync().then(g=>{e.success&&e.success(g),e.complete&&e.complete()}).catch(g=>{e.fail&&e.fail(g),e.complete&&e.complete()}),gg.login=e=>{gg.log("\u8c03\u7528\u539f\u751f\u767b\u5f55gg.log()");try{let a=cc.sys.localStorage.getItem("FLUID")||gg.callStaticMethod("com/ily/core/jsb/DeviceManager","getDeviceId","()Ljava/lang/String;");a||(a=`FLUID_${Date.now()}${Math.floor(1e4*Math.random())}`),gg.log("code:",a),cc.sys.localStorage.setItem("FLUID",a),e&&e.success&&e.success({code:a})}catch(g){e&&e.fail&&e.fail(g)}e&&e.complete&&e.complete()},gg.openBrowserUrl=e=>{gg.isIOS?gg.callStaticMethod("DeviceManager","openBrowserUrl:",e):gg.callStaticMethod("com/ily/core/jsb/DeviceManager","openBrowserUrl","(Ljava/lang/String;)V",e)},gg.setClipboardData=e=>new Promise((g,a)=>{try{gg.isIOS?gg.callStaticMethod("DeviceManager","setClipboardData:",e.data):gg.callStaticMethod("com/ily/core/jsb/DeviceManager","setClipboardData","(Ljava/lang/String;)V",e.data),e.success&&e.success({data:e.data}),g()}catch(g){e.fail&&e.fail(g),a(g)}e.complete&&e.complete()}),gg.getClipboardData=e=>new Promise((g,a)=>{try{const t=gg.isIOS?gg.callStaticMethod("DeviceManager","getClipboardData"):gg.callStaticMethod("com/ily/core/jsb/DeviceManager","getClipboardData","()Ljava/lang/String;");e.success&&e.success({data:t}),g({data:t})}catch(g){e.fail&&e.fail(g),a(g)}e.complete&&e.complete()}),gg.vibrateShort=e=>new Promise((g,a)=>{try{gg.isIOS?gg.callStaticMethod("DeviceManager","vibrator:",!0):gg.callStaticMethod("com/ily/core/jsb/DeviceManager","vibrator","(II)V",450,500),e.success&&e.success(),g()}catch(g){e.fail&&e.fail(g),a(g)}e.complete&&e.complete()}),gg.vibrateLong=()=>new Promise((e,g)=>{try{gg.isIOS?gg.callStaticMethod("DeviceManager","vibrator:",!1):gg.callStaticMethod("com/ily/core/jsb/DeviceManager","vibrator","(II)V",1500,1e3),object.success&&object.success(),e()}catch(e){object.fail&&object.fail(e),g(e)}object.complete&&object.complete()}),gg.setScreenBrightness=e=>new Promise((g,a)=>{try{gg.isIOS?gg.callStaticMethod("DeviceManager","setScreenBrightness:",e.value):gg.callStaticMethod("com/ily/core/jsb/DeviceManager","setScreenBrightness","(F)V",e.value),e.success&&e.success(),g()}catch(g){e.fail&&e.fail(g),a(g)}e.complete&&e.complete()}),gg.getScreenBrightness=e=>new Promise((g,a)=>{try{const t=gg.isIOS?gg.callStaticMethod("DeviceManager","getScreenBrightness"):gg.callStaticMethod("com/ily/core/jsb/DeviceManager","getScreenBrightness","()F");e.success&&e.success({value:t}),g({value:t})}catch(g){e.fail&&e.fail(g),a(g)}e.complete&&e.complete()}),gg.setKeepScreenOn=e=>new Promise((g,a)=>{try{gg.isIOS?gg.callStaticMethod("DeviceManager","setKeepScreenOn:",e.keepScreenOn):gg.callStaticMethod("com/ily/core/jsb/DeviceManager","setKeepScreenOn","(Z)V",e.keepScreenOn),e.success&&e.success(),g()}catch(g){e.fail&&e.fail(g),a(g)}e.complete&&e.complete()}),gg.showToast=e=>new Promise((g,a)=>{try{const t=e.duration>1200;e.title=e.title||"",gg.isIOS?(e.mask=e.mask?1:0,gg.callStaticMethod("DeviceManager","showToast:",gg.stringifyJSON(e))):gg.callStaticMethod("com/ily/core/jsb/DeviceManager","showToast","(Ljava/lang/String;Z)V",e.title,t),e.success&&e.success(),g()}catch(g){e.fail&&e.fail(g),a(g)}e.complete&&e.complete()}),gg.showModal=e=>new Promise((g,a)=>{try{const t=`showModel_confirm_${e.content}`,c=`showModel_cancell_${e.content}`;window[t]=()=>{window[t]=void 0;const g={confirm:!0,cancel:!1};e.success&&e.success(g),a(g)},window[c]=()=>{window[c]=void 0;const g={confirm:!1,cancel:!0};e.success&&e.success(g),a(g)},gg.isEmpty(e.title)&&(e.title=""),gg.isEmpty(e.content)&&(e.content=""),gg.isEmpty(e.showCancel)&&(e.showCancel=!0),gg.isEmpty(e.cancelText)&&(e.cancelText="\u53d6\u6d88"),gg.isEmpty(e.cancelColor)&&(e.cancelColor="#000000"),gg.isEmpty(e.confirmText)&&(e.confirmText="\u786e\u5b9a"),gg.isEmpty(e.confirmColor)&&(e.confirmColor="#576B95"),gg.isEmpty(e.editable)&&(e.editable=!1);const i=gg.stringifyJSON({title:e.title,content:e.content,cancelText:e.cancelText,confirmText:e.confirmText});gg.isIOS?gg.callStaticMethod("DeviceManager","showModal:cancelCallbackName:confirmCallbackName:",i,`window['${c}']`,`window['${t}']`):gg.callStaticMethod("com/ily/core/jsb/DeviceManager","showModal","(Ljava/lang/String;Ljava/lang/String;Ljava/lang/String;)V",i,`window['${c}']`,`window['${t}']`)}catch(g){e.fail&&e.fail(g),a(g)}e.complete&&e.complete()}),gg.exitMiniProgram=e=>(gg.info("gg.exitMiniProgram(data)\u51fd\u6570\u5373\u5c06\u5e9f\u5f03\uff0c\u8bf7\u4f7f\u7528gg.exitApp(data)\u51fd\u6570\u4ee3\u66ff\u3002"),gg.exitApp(e)),gg.exitApp=e=>new Promise((g,a)=>{try{gg.isIOS?gg.callStaticMethod("DeviceManager","exitApp"):gg.callStaticMethod("com/ily/core/jsb/DeviceManager","exitApp","()V"),e&&e.success&&e.success(),g()}catch(g){e&&e.fail&&e.fail(g),a(g)}e&&e.complete&&e.complete()}),gg.checkIsUserAdvisedToRest=e=>new Promise((g,a)=>{try{gg.isIOS?gg.gg.callStaticMethod("BaseToolManager","checkRealName"):gg.callStaticMethod("com/ily/core/jsb/BaseToolManager","checkRealName","()V"),e.success&&e.success(),g()}catch(g){e.fail&&e.fail(g),a(g)}e.complete&&e.complete()}),gg.downloadFile=e=>{window["gg_downloadFile_callback"+e.url]=(g,a)=>{if(window["gg_downloadFile_callback"+e.url]=void 0,g)return g=gg.parseJSON(g),e.fail&&e.fail(g);a=gg.parseJSON(a),e.success&&e.success(a),e.complete&&e.complete(a)};const g=`${e.url}?v=${Math.floor(Date.now()/1e3/60)}`;if(gg.isIOS){const a="downloadFile:storeFile:progressCallbackName:completeCallbackName:";gg.callStaticMethod("BaseToolManager",a,g,e.filePath,void 0,`window['gg_downloadFile_callback${e.url}']`)}else{const a="com/ily/core/jsb/BaseToolManager",t="(Ljava/lang/String;Ljava/lang/String;Ljava/lang/String;Ljava/lang/String;)V";gg.callStaticMethod(a,"downloadFile",t,g,e.filePath,void 0,`window['gg_downloadFile_callback${e.url}']`)}},gg.unzipFile=e=>{if(window["gg_unzipFile_callback"+e.url]=(g,a)=>{if(window["gg_unzipFile_callback"+e.url]=void 0,g)return g=gg.parseJSON(g),e.fail&&e.fail(g);a=gg.parseJSON(a),e.success&&e.success(a),e.complete&&e.complete(a)},gg.isIOS){const g="unzipFile:saveDir:progressCallbackName:completeCallbackName:";gg.callStaticMethod("BaseToolManager",g,e.zipFilePath,e.targetPath,void 0,`window['gg_unzipFile_callback${e.url}']`)}else{const g="com/ily/core/jsb/BaseToolManager",a="(Ljava/lang/String;Ljava/lang/String;Ljava/lang/String;Ljava/lang/String;)V";gg.callStaticMethod(g,"unzipFile",a,e.zipFilePath,e.targetPath,void 0,`window['gg_unzipFile_callback${e.url}']`)}},gg.openAppStoreWithAppId=e=>new Promise((g,a)=>{try{gg.isIOS?gg.callStaticMethod("DeviceManager","jumpAppStoreWithAppID:",e.appId):gg.callStaticMethod("com/ily/core/jsb/DeviceManager","jumpAppStoreWithAppID","(Ljava/lang/String;)V",e.appId),e.success&&e.success(),g()}catch(g){e.fail&&e.fail(g),a(g)}e.complete&&e.complete()}),gg.navigateToMiniProgram=e=>new Promise((g,a)=>{try{const t="";gg.isIOS?gg.callStaticMethod("DeviceManager","jumpAppSchemes:AppID:",t,e.appId):gg.callStaticMethod("com/ily/core/jsb/DeviceManager","navigateToMiniProgram","(Ljava/lang/String;)V",e.appId),e.success&&e.success(),g()}catch(g){e.fail&&e.fail(g),a(g)}e.complete&&e.complete()}),gg.setDisplayLogPanel=e=>{gg.isIOS?gg.callStaticMethod("DebugTool","setDisplayLogPanel:",e):gg.warn("\u8be5\u5e73\u53f0\u6682\u672a\u5b9e\u73b0gg.setDisplayLogPanel()\u65b9\u6cd5\u3002")};const o=e=>{if(e.eventName=e.eventName||e.key,gg.isIOS)e.value=gg.stringifyJSON(e.value||{}),gg.callStaticMethod("JSBridgeManager","emitEventAnalytics:",gg.stringifyJSON(e));else{const g=e.value||{};e.value=void 0,e={...e,...g},gg.callStaticMethod("com/ily/core/jsb/JSBridgeManager","emitEventAnalytics","(Ljava/lang/String;)V",gg.stringifyJSON(e))}};gg.sendEvent=(e,g)=>{gg.log("\u53d1\u9001\u7edf\u8ba1\u4e8b\u4ef6\uff1a",e,g),o({analyticsEventType:"ANALYTICS_SEND_EVENT",key:e,value:g||{}})},gg.onLevelStart=(e,g)=>{const a=`\u5f00\u59cb\u7b2c${e}\u5173`;gg.log("\u53d1\u9001\u7edf\u8ba1\u4e8b\u4ef6\uff1a",a,g),o({analyticsEventType:"ANALYTICS_SEND_EVENT",key:a,value:g||{}})},gg.onLevelEnd=(e,g)=>{const a=`\u7ed3\u675f\u7b2c${e}\u5173`;gg.log("\u53d1\u9001\u7edf\u8ba1\u4e8b\u4ef6\uff1a",a,g),o({analyticsEventType:"ANALYTICS_SEND_EVENT",key:a,value:g||{}})},gg.onPageStart=e=>{gg.log("\u53d1\u9001\u9875\u9762\u7edf\u8ba1\u4e8b\u4ef6-\u5f00\u59cb\uff1a",e),o({analyticsEventType:"ANALYTICS_PAGE_START",key:e})},gg.onPageEnd=e=>{gg.log("\u53d1\u9001\u9875\u9762\u7edf\u8ba1\u4e8b\u4ef6-\u7ed3\u675f\uff1a",e),o({analyticsEventType:"ANALYTICS_PAGE_END",key:e})},gg.onProfileSignIn=e=>{gg.log("\u53d1\u9001\u81ea\u6709id\u767b\u5f55\u4e8b\u4ef6\uff1a",e),o({analyticsEventType:"ANALYTICS_SIGN_IN",key:e})},gg.onProfileSignOff=e=>{gg.log("\u53d1\u9001\u81ea\u6709id\u767b\u51fa\u4e8b\u4ef6\uff1a",e),o({analyticsEventType:"ANALYTICS_SIGN_OUT",key:e})},gg.createBannerAd=e=>{gg.log("\u8c03\u7528createBannerAd\u5e7f\u544a  gg.createBannerAd:",gg.stringifyJSON(e));let g=BannerAd.ad[e.adUnitId];return g||(g=new BannerAd(e)),g},gg.createRewardedVideoAd=e=>{gg.log("\u8c03\u7528createRewardedVideoAd\u6fc0\u52b1\u89c6\u9891");let g=RewardedVideoAd.ad[e.adUnitId];return g||(g=new RewardedVideoAd(e)),g},gg.createInterstitialAd=e=>{gg.log("\u8c03\u7528createInterstitialAd\u6fc0\u52b1\u89c6\u9891");let g=InterstitialAd.ad[e.adUnitId];return g||(g=new InterstitialAd(e)),g},gg.jsb.emitEventAD=e=>{e=gg.stringifyJSON(e),gg.log("\u8c03\u7528Native\u5e7f\u544a\u4e8b\u4ef6\uff1a",e),gg.isIOS?gg.callStaticMethod("JSBridgeManager","emitEventAD:",gg.stringifyJSON(e)):gg.callStaticMethod("com/ily/core/jsb/JSBridgeManager","emitEventAD","(Ljava/lang/String;)V",e)},gg.payment=e=>new Promise((g,a)=>{const t=`payment_${Date.now()}`;window[`${t}`]=(c,i)=>{if(window[`${t}`]=void 0,c)return e.fail&&e.fail(c),a(c),e.complete&&e.complete();(i=i||{}).errMsg="ok",e.success&&e.success(i),g(i),e.complete&&e.complete()},e.callback=`window.${t}`,(e=gg.stringifyJSON(e)).callback="gg.payment.callback";try{gg.log("\u8c03\u7528Native\u652f\u4ed8\u4e8b\u4ef6\uff1a",e),gg.isIOS?gg.callStaticMethod("JSBridgeManager","emitEventApplePay:",e):gg.callStaticMethod("com/common/jsb/JSBridgeManager","emitEventGooglePay","(Ljava/lang/String;)V",e)}catch(g){e.fail&&e.fail(g),a(g),e.complete&&e.complete()}})}